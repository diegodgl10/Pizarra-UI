<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://kit.fontawesome.com/7e82edf099.js" crossorigin="anonymous"></script>
  <title>Prueba de Canvas</title>
  <link href="./styles.css" rel="stylesheet"/>
</head>
<body>
  <!-- Barra de herramientas -->
  <div class="draw-tools">
    <!-- Tamanio de lapiz -->
    <input type="range" class="js-line-range" min="1" max="70" value="4">
    <label class="js-range-value">1</label>Px

    <!-- Selector de color -->
    <input
    type="color"
    value="#000000"
    class="js-color-picker color-picker"
    id="style-color"
    />

    <!-- Boton dibujar -->
    <button 
    class="btn dibujar"
    id="lapiz-dibujar"
    type="button"
    title="Lapiz"> 
      <!-- <p>Lapiz</p> -->
      <i class="fas fa-pencil-alt"></i>
    </button>

    <!-- Boton de borrador -->
    <button 
    class="btn borrador"
    id="lapiz-borrador"
    type="button"
    title="Borrador"> 
      <!-- <p>Borrador</p> -->
      <i class="fa fa-eraser"></i>
    </button>

    <!-- Boton limpiar pizara -->
    <button 
    class="btn borrar_todo"
    id="borrar-todo"
    type="button"
    title="Borrar toda la hoja"> 
      <!-- <p>Borrar pizarra</p> -->
      <i class="fa-solid fa-trash"></i>
    </button>
  </div> 

  <!-- Pizarra -->
  <div class="canv">
    <!-- Pizara base -->
    <canvas id="base" class="js-paint paint-canvas" width="600" height="300"></canvas>
    <!-- Pizarra grid -->
    <canvas id="grid" class="js-paint paint-canvas" width="600" height="300"></canvas>
  </div>
</body>

<script src="script.js"></script>
<!--
<script>

  // Pizarra base
  const paintCanvas = document.querySelector( '.js-paint' );
  
  const ctxPen = paintCanvas.getContext( '2d' );
  ctxPen.lineCap = 'round';

  // Pizarra grid
  var canvaGrid = document.getElementById("grid");
  var ctxGrid = canvaGrid.getContext("2d");
  for (var i = 5; i < 595; i=i+6) {
    // lineas verticales
    ctxGrid.moveTo(i,5);
    ctxGrid.lineTo(i,595);
    // lineas horizontales
    ctxGrid.moveTo(5,i);
    ctxGrid.lineTo(595,i);
    // color lineas
    ctxGrid.strokeStyle="#e1e1e1";
    ctxGrid.stroke();
  }

  // Accion lapiz
  const procesarLapiz = function (event) {
    ctxPen.globalCompositeOperation="source-over";
  }

  // Accion borrador
  const procesarLapizBorrador = function (event) {
    ctxPen.globalCompositeOperation="destination-out";
  }

  // Accion Limpiar pizarra
  const procesarClickBorrar = function (event) {
    ctxPen.clearRect(0, 0, paintCanvas.clientWidth, paintCanvas.clientHeight);
  }

  const colorPicker = document.querySelector( '.js-color-picker');

  const colorListener = function (event) {
    ctxPen.strokeStyle = event.target.value;
    console.log(event.target) // <input type="color"  class="js-color-picker  color-picker">
  }

  colorPicker.addEventListener( 'change', colorListener);

  const lineWidthRange = document.querySelector( '.js-line-range' );
  const lineWidthLabel = document.querySelector( '.js-range-value' );


  lineWidthRange.addEventListener( 'input', event => {
      const width = event.target.value;
      lineWidthLabel.innerHTML = width;
      ctxPen.lineWidth = width;
  } );

  let x = 0, y = 0;
  let isMouseDown = false;

  const stopDrawing = () => { isMouseDown = false; }
  const startDrawing = event => {
      isMouseDown = true;   
     [x, y] = [event.offsetX, event.offsetY];  
  }
  const drawLine = event => {
      if ( isMouseDown ) {
          const newX = event.offsetX;
          const newY = event.offsetY;
          ctxPen.beginPath();
          ctxPen.moveTo( x, y );
          ctxPen.lineTo( newX, newY );
          ctxPen.stroke();
          //[x, y] = [newX, newY];
          x = newX;
          y = newY;
      }
  }

  // Movimientos
  paintCanvas.addEventListener( 'mousedown', startDrawing );
  paintCanvas.addEventListener( 'mousemove', drawLine );
  paintCanvas.addEventListener( 'mouseup', stopDrawing );
  paintCanvas.addEventListener( 'mouseout', stopDrawing );

  // Accionar Lapiz de dibujo
  const lapizButton = document.querySelector('#lapiz-dibujar')
  lapizButton.addEventListener('click', procesarLapiz)

  // Accionar Borrador
  const borrarLapizButton = document.querySelector('#lapiz-borrador')
  borrarLapizButton.addEventListener('click', procesarLapizBorrador)
  
  // Accionar Borrado de pizarra
  const borrarCanvasButton = document.querySelector('#borrar-todo')
  borrarCanvasButton.addEventListener('click', procesarClickBorrar)
</script>
-->
</html>